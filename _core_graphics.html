<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
		<meta http-equiv="X-UA-Compatible" content="IE=9"/>
		<meta name="generator" content="Doxygen 1.9.5"/>
		<meta name="viewport" content="width=device-width, initial-scale=1"/>
		<title>Nebula: CoreGraphics</title>
		<link href="tabs.css" rel="stylesheet" type="text/css"/>
		<script type="text/javascript" src="jquery.js"></script>
		<script type="text/javascript" src="dynsections.js"></script>
		<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
		<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
		<link href="doxygen.css" rel="stylesheet" type="text/css" />
		<link href="custom.css" rel="stylesheet" type="text/css"/>
<link href="custom_dark_theme.css" rel="stylesheet" type="text/css"/>
	</head>
	<body>
	<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
		<div id="titlearea">
			<table cellspacing="0" cellpadding="0">
				<tbody>
					<tr style="height: 56px;">
						<td id="projectalign" style="padding-left: 0.5em;">
							<div id="projectname">Nebula
							</div>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
		<!-- end header part --><!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('_core_graphics.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title"><a class="el" href="namespace_core_graphics.html" title="A barrier is a memory barrier between two GPU operations, and thus allows for a guarantee of concurre...">CoreGraphics</a> </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="NebulaCoreGraphicsSystem"></a>
The CoreGraphics Subsystem</h1>
<p >The <a class="el" href="namespace_core_graphics.html" title="A barrier is a memory barrier between two GPU operations, and thus allows for a guarantee of concurre...">CoreGraphics</a> subsystem is the interface between the programmer and the GPU. It wraps the multiplicity of graphics APIs in a single unified interface. The main class is called the CoreGraphics::GraphicsDevice, which is the central hub for managing command buffers, submission logic, GPU queries and such.</p>
<p >The way <a class="el" href="namespace_core_graphics.html" title="A barrier is a memory barrier between two GPU operations, and thus allows for a guarantee of concurre...">CoreGraphics</a> is implemented is by supplying a set of headers which define the interface. Then, during compile time and based on your compilation flags, the function linked to said header interface will also implement the renderer. We cannot change the renderer at runtime because of this reason.</p>
<p ><a class="el" href="namespace_core_graphics.html" title="A barrier is a memory barrier between two GPU operations, and thus allows for a guarantee of concurre...">CoreGraphics</a> can be interface directly, an example of which can look like this:</p>
<div class="fragment"><div class="line"><a class="code hl_function" href="namespace_core_graphics.html#a9744ae7569760a865a105690a52a1e3c">CoreGraphics::SetShaderProgram</a>(myShaderProgram);</div>
<div class="line">CoreGraphics::BeginBatch(<a class="code hl_enumvalue" href="class_frame_1_1_frame_batch_type.html#a56e994192b9111c140e30a94285bebb3a044b888ece26851fc45730b61b2a85af">Frame::FrameBatchType::System</a>);</div>
<div class="line">CoreGraphics::MeshBind(myMesh, 0);</div>
<div class="line">CoreGraphics::SetResourceTable(myResourceTable, NEBULA_BATCH_GROUP, <a class="code hl_enumvalue" href="namespace_core_graphics.html#abae9cceb5c5bb86ed89f84d3d3a8c8eeab9b94aa834e5393d4daf134d2034bc69">CoreGraphics::GraphicsPipeline</a>, <span class="keyword">nullptr</span>);</div>
<div class="line">CoreGraphics::Draw();</div>
<div class="line">CoreGraphics::EndBatch();</div>
<div class="ttc" id="aclass_frame_1_1_frame_batch_type_html_a56e994192b9111c140e30a94285bebb3a044b888ece26851fc45730b61b2a85af"><div class="ttname"><a href="class_frame_1_1_frame_batch_type.html#a56e994192b9111c140e30a94285bebb3a044b888ece26851fc45730b61b2a85af">Frame::FrameBatchType::System</a></div><div class="ttdeci">@ System</div><div class="ttdef"><b>Definition:</b> framebatchtype.h:36</div></div>
<div class="ttc" id="anamespace_core_graphics_html_a9744ae7569760a865a105690a52a1e3c"><div class="ttname"><a href="namespace_core_graphics.html#a9744ae7569760a865a105690a52a1e3c">CoreGraphics::SetShaderProgram</a></div><div class="ttdeci">void SetShaderProgram(const CoreGraphics::ShaderProgramId pro, const CoreGraphics::QueueType queue, const bool bindSharedResources)</div></div>
<div class="ttc" id="anamespace_core_graphics_html_abae9cceb5c5bb86ed89f84d3d3a8c8eeab9b94aa834e5393d4daf134d2034bc69"><div class="ttname"><a href="namespace_core_graphics.html#abae9cceb5c5bb86ed89f84d3d3a8c8eeab9b94aa834e5393d4daf134d2034bc69">CoreGraphics::GraphicsPipeline</a></div><div class="ttdeci">@ GraphicsPipeline</div><div class="ttdef"><b>Definition:</b> config.h:133</div></div>
</div><!-- fragment --><p >This code will apply a shader program, start a rendering batch, bind a mesh, bind the necessary resources, issue the draw, and then end the batch. This will <em><b>indirectly</b></em> perform a render, as in, this series of commands will be recorded to what is called a command buffer, and is executed together with a bunch of other commands when the CoreGraphics::GraphicsDevice gets a call to do so.</p>
<p >In most cases, the rendering is done through what is called a FrameScript. However, we might want to implement plugins for the frame script, such as when we want to write some custom rendering code, but also have it executed in between two passes in a frame script. To do so, we simply register a callback as such:</p>
<div class="fragment"><div class="line"><a class="code hl_function" href="namespace_frame.html#a77f5e4db78be13d003454b0dd9fd551d">Frame::AddCallback</a>(<span class="stringliteral">&quot;MyFramePluginName&quot;</span>, [](<a class="code hl_typedef" href="types_8h.html#ad119735112d40fd29a3017de944ccc98">IndexT</a>) { ... });</div>
<div class="ttc" id="anamespace_frame_html_a77f5e4db78be13d003454b0dd9fd551d"><div class="ttname"><a href="namespace_frame.html#a77f5e4db78be13d003454b0dd9fd551d">Frame::AddCallback</a></div><div class="ttdeci">void AddCallback(const Util::StringAtom name, std::function&lt; void(const CoreGraphics::CmdBufferId, IndexT, IndexT)&gt; func)</div><div class="ttdoc">add function callback to global dictionary</div><div class="ttdef"><b>Definition:</b> frameplugin.cc:112</div></div>
<div class="ttc" id="atypes_8h_html_ad119735112d40fd29a3017de944ccc98"><div class="ttname"><a href="types_8h.html#ad119735112d40fd29a3017de944ccc98">IndexT</a></div><div class="ttdeci">int IndexT</div><div class="ttdef"><b>Definition:</b> types.h:48</div></div>
</div><!-- fragment --><p >And then replace the ... with the code from before. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
		<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
			<ul>
				<li class="navelem"><a class="el" href="render.html">Render Systems</a></li>
				<li class="footer">
					Generated on Sat Sep 17 2022 22:18:05 for Nebula. Dark theme by <a href="http://majerle.eu" target="_new">Tilen Majerle</a>. All rights reserved.
				</li>
			</ul>
		</div>
		<script src="custom.js"></script>
	</body>
</html>
